<template>
  <!--客户基本信息-->
  <view class="customer-info-box row-between" @tap="tap({{customerInfo}})">
    <view class="label-box mr20" @tap.stop="select({{customerInfo.customerId}})" wx:if="{{isMoreSelect}}">
      <!-- 改成template的勾选标识符-->
      <icon class="weui-icon-checkbox_{{!customerInfo.check ? 'circle':'success'}}circle" type="{{!customerInfo.check ? 'circle':'success'}}" size="23"></icon>
    </view>
    <!--左侧头像-->
    <image class="customer-avatar" wx:if="{{customerInfo.avatarUrl}}"
           src="{{customerInfo.avatarUrl}}"/>
    <icon class="customer" color="gray" style="font-size: 120rpx;line-height: 120rpx;" wx:else/>
    <!--右侧主区域-->
    <view class="column customer-main-box">
      <!--姓名-->
      <view class="row-between">
        <view class="row">
          <text class="xxl mr20 user-name-box">{{customerInfo.nickName ? customerInfo.nickName : '微信用户'}}</text>
          <image class="icon mr10" src="{{customerInfo.level}}"/>
          <image class="icon mr10" src="{{customerInfo.bound}}"/>
        </view>
      </view>
      <text class="muted">{{customerInfo.phone}}</text>
      <view class="row">
        <text class="muted">{{customerInfo.key}}</text>
        <text class="muted">{{customerInfo.countValue}}</text>
      </view>
    </view>
    <!--更多地址-->
    <icon wx:if="{{isMore}}" class="more" color="gray"/>
  </view>
</template>
<script>
  import wepy from 'wepy';
  export default class CustomerItem extends wepy.component {
    props = {
      customerInfo: {},
      isMore: {
        default: true
      },
      isMoreSelect: {
        default: false
      }
    };
    methods = {
      tap(customer) {
        this.$emit('tap', customer);
      },
      async select(id) {
        // 通知父页面，把template_id传递给父页面
        this.$emit('select', id);
      }
    }
  }
</script>
<style lang="scss">
  @import "../../styles/variable";
  .customer-info-box {
    padding: 20rpx 30rpx;
    background-color: white;
    border-bottom: $border;
    .customer-avatar {
      height: 120rpx;
      width: 120rpx;
      border-radius: 50%;
    }

    .address-box {
      text {
        color: $color-muted;
        font-size: $text-sm;
        word-break: break-all;
      }
    }
  }
  .customer-main-box {
    flex: 1;
    padding-left: rpx(25);
    .user-name-box{
      max-width: 400rpx;
      @extend .address-text;
    }
    .address-text{
      display: -webkit-box;
      -webkit-line-clamp: 1;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
  }
</style>
